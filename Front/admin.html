<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalogo</title>
    <link rel="stylesheet" href="./public/styles/main.css">
    <script src="https://kit.fontawesome.com/14c71b0a25.js" crossorigin="anonymous"></script>
    <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>
    <body onload="getSession()">
        <nav class="navbar navbar-expand-lg navbar-light nav-bg fixed-top">
            <a class="navbar-brand hover" href="/Front/index.html"> 
            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewBox="0 0 512.009 512.009" style="enable-background:new 0 0 512.009 512.009;" xml:space="preserve">
           <g>
               <g>
                   <g>
                       <path d="M82.286,429.732l27.367-0.001l0.061-0.012l0.061,0.012l36.456-0.001l0.054-0.011l0.054,0.011l36.47-0.002l0.047-0.01
                           l0.047,0.009l36.484-0.001l0.04-0.008l0.04,0.008l36.498-0.002l0.033-0.007l0.033,0.007l36.512-0.002l0.026-0.005l0.026,0.005
                           l36.526-0.001l0.019-0.004l0.019,0.004l36.54-0.002l0.012-0.002l0.012,0.002l36.554-0.001l0.003-0.001l0.007,0.001l27.424-0.001
                           V82.29H82.286V429.732z M146.286,100.576c25.247,0,45.714,20.467,45.714,45.714s-20.467,45.714-45.714,45.714
                           s-45.714-20.467-45.714-45.714C100.601,121.055,121.051,100.606,146.286,100.576z"/>
                       <path d="M146.286,173.719c15.148,0,27.429-12.28,27.429-27.429s-12.28-27.429-27.429-27.429s-27.429,12.28-27.429,27.429
                           C118.874,161.432,131.144,173.702,146.286,173.719z M137.875,142.813c0.42-1.129,1.074-2.156,1.92-3.013
                           c2.616-2.637,6.567-3.429,9.997-2.005c3.43,1.424,5.658,4.782,5.637,8.496c-0.014,0.613-0.077,1.223-0.188,1.826
                           c-0.096,0.574-0.28,1.129-0.545,1.647c-0.201,0.582-0.477,1.136-0.821,1.647c-0.366,0.455-0.732,0.911-1.098,1.371
                           c-1.754,1.668-4.071,2.614-6.491,2.652c-2.424-0.017-4.748-0.967-6.491-2.651c-1.672-1.751-2.619-4.07-2.651-6.491
                           C137.109,145.09,137.36,143.898,137.875,142.813z"/>
                       <path d="M512,0.005H0v512h512.009L512,0.005z M475.429,137.147c5.049,0,9.143,4.093,9.143,9.143c0,5.049-4.093,9.143-9.143,9.143
                           H448v18.286h27.429c5.049,0,9.143,4.093,9.143,9.143c0,5.049-4.093,9.143-9.143,9.143H448v18.286h27.429
                           c5.049,0,9.143,4.093,9.143,9.143s-4.093,9.143-9.143,9.143H448v18.286h27.429c5.049,0,9.143,4.093,9.143,9.143
                           c0,5.049-4.093,9.143-9.143,9.143H448v18.286h27.429c5.049,0,9.143,4.093,9.143,9.143c0,5.049-4.093,9.143-9.143,9.143H448
                           v18.286h27.429c5.049,0,9.143,4.093,9.143,9.143s-4.093,9.143-9.143,9.143H448v18.286h27.429c5.049,0,9.143,4.093,9.143,9.143
                           s-4.093,9.143-9.143,9.143H448v18.286h27.429c5.049,0,9.143,4.093,9.143,9.143c0,5.049-4.093,9.143-9.143,9.143H448v18.286
                           c-0.012,10.094-8.192,18.274-18.286,18.286h-18.286v27.429c0,5.049-4.093,9.143-9.143,9.143c-5.049,0-9.143-4.093-9.143-9.143
                           v-27.429h-18.286v27.429c0,5.049-4.093,9.143-9.143,9.143s-9.143-4.093-9.143-9.143v-27.429h-18.286v27.429
                           c0,5.049-4.093,9.143-9.143,9.143S320,480.483,320,475.433v-27.429h-18.286v27.429c0,5.049-4.093,9.143-9.143,9.143
                           c-5.049,0-9.143-4.093-9.143-9.143v-27.429h-18.286v27.429c0,5.049-4.093,9.143-9.143,9.143s-9.143-4.093-9.143-9.143v-27.429
                           h-18.286v27.429c0,5.049-4.093,9.143-9.143,9.143s-9.143-4.093-9.143-9.143v-27.429H192v27.429c0,5.049-4.093,9.143-9.143,9.143
                           c-5.049,0-9.143-4.093-9.143-9.143v-27.429h-18.286v27.429c0,5.049-4.093,9.143-9.143,9.143c-5.049,0-9.143-4.093-9.143-9.143
                           v-27.429h-18.286v27.429c0,5.049-4.093,9.143-9.143,9.143s-9.143-4.093-9.143-9.143v-27.429H82.286
                           c-10.094-0.012-18.274-8.192-18.286-18.286v-18.286H36.571c-5.049,0-9.143-4.093-9.143-9.143c0-5.049,4.093-9.143,9.143-9.143H64
                           v-18.286H36.571c-5.049,0-9.143-4.093-9.143-9.143s4.093-9.143,9.143-9.143H64V338.29H36.571c-5.049,0-9.143-4.093-9.143-9.143
                           s4.093-9.143,9.143-9.143H64v-18.286H36.571c-5.049,0-9.143-4.093-9.143-9.143c0-5.049,4.093-9.143,9.143-9.143H64v-18.286
                           H36.571c-5.049,0-9.143-4.093-9.143-9.143c0-5.049,4.093-9.143,9.143-9.143H64v-18.286H36.571c-5.049,0-9.143-4.093-9.143-9.143
                           s4.093-9.143,9.143-9.143H64v-18.286H36.571c-5.049,0-9.143-4.093-9.143-9.143c0-5.049,4.093-9.143,9.143-9.143H64v-18.286
                           H36.571c-5.049,0-9.143-4.093-9.143-9.143c0-5.049,4.093-9.143,9.143-9.143H64v-18.286H36.571c-5.049,0-9.143-4.093-9.143-9.143
                           s4.093-9.143,9.143-9.143H64V82.29c0.012-10.094,8.192-18.274,18.286-18.286h18.286V36.576c0-5.049,4.093-9.143,9.143-9.143
                           s9.143,4.093,9.143,9.143v27.429h18.286V36.576c0-5.049,4.093-9.143,9.143-9.143c5.049,0,9.143,4.093,9.143,9.143v27.429h18.286
                           V36.576c0-5.049,4.093-9.143,9.143-9.143c5.049,0,9.143,4.093,9.143,9.143v27.429h18.286V36.576c0-5.049,4.093-9.143,9.143-9.143
                           s9.143,4.093,9.143,9.143v27.429h18.286V36.576c0-5.049,4.093-9.143,9.143-9.143s9.143,4.093,9.143,9.143v27.429h18.286V36.576
                           c0-5.049,4.093-9.143,9.143-9.143c5.049,0,9.143,4.093,9.143,9.143v27.429H320V36.576c0-5.049,4.093-9.143,9.143-9.143
                           s9.143,4.093,9.143,9.143v27.429h18.286V36.576c0-5.049,4.093-9.143,9.143-9.143s9.143,4.093,9.143,9.143v27.429h18.286V36.576
                           c0-5.049,4.093-9.143,9.143-9.143c5.049,0,9.143,4.093,9.143,9.143v27.429h18.286c10.094,0.012,18.274,8.192,18.286,18.286
                           v18.286h27.429c5.049,0,9.143,4.093,9.143,9.143s-4.093,9.143-9.143,9.143H448v18.286H475.429z"/>
                   </g>
               </g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           <g>
           </g>
           </svg>
           
            <div class="name">
                Sigma
            </div></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                <a class="nav-link hover" href="/Front/catalog.html">Catalogo</a>
                </li>
                <li class="nav-item">
                <a class="nav-link hover" href="/Front/contact.html">Contactanos</a>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto" id="insert">

            </ul>
            </div>
        </nav>

        <div class="separador2">

        </div>
        
        <div class="container AdminCont">
            <div class="row">
                <div class="col-sm">
                    <a class="card text-center " id="Productos" data-toggle="collapse" aria-expanded="false"
                        aria-controls="ProductsPanel" href="#ProductsPanel">
                        <div class="card-header">
                            Productos
                        </div>
                        <div class="card-body center">
                            <i class="fas fa-shopping-cart" id="tamañoAdmin"></i>
                            <hr>
                            <span>Administra y agrega productos</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm">
                    <a class="card text-center" id="Users" data-toggle="collapse" aria-expanded="false"
                        aria-controls="UsersPanel" href="#UsersPanel">
                        <div class="card-header">
                            Usuarios
                        </div>
                        <div class="card-body">
                            <i class="fas fa-user S"></i>
                            <hr>
                            <span>Administra y crea usuarios</span>
                        </div>
                    </a>
                </div>
                <div class="col-sm">
                    <a class="card text-center" id="Distribution" data-toggle="collapse" aria-expanded="false"
                        aria-controls="DisPanel" href="#DisPanel">
                        <div class="card-header">
                           Compras
                        </div>
                        <div class="card-body">
                            <i class="fas fa-shipping-fast fa-3x"></i>
                            <hr>
                            <span>Administra las compras</span>
                        </div>
                    </a>
                </div>
            </div>
            <hr>
        </div>
        
        <div class="jumbotron home-divider">
            <div class="container">
                <h2 id="textSelection">Selecciona una opcion</h2>
                <hr>
                
                <div class="collapse multi-collapse hideMeBox" id="ProductsPanel">
                    <a href="/catalog"><button class="btn btn-alert">Administrar productos</button></a>
                    <hr>
                    <form action="/adminAddProduct" method="POST" enctype="multipart/form-data">
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <label for="inputMedName">Nombre</label>
                                <input type="text" class="form-control" id="inputMedName" required name="name">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="inputPrice">Precio</label>
                                <input type="number" class="form-control" id="inputPrice" required name="price" min="1" max="1000000000000">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="inputStock">Cantidad en stock</label>
                                <input type="number" class="form-control" id="inputStock" required name="price" min="1" max="9999999999999">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="inputType">Tipo</label>
                                <select onchange="getCategoryInfo(this)" class="form-control" id="inputType" required name="type">
                                    <option selected disabled value="">Elegir...</option>
                                    <option value="tarjeta_video">Tarjeta de Video</option>
                                    <option value="motherboard">Tarjeta Madre</option>
                                    <option value="ram">Memoria RAM</option>
                                    <option value="almacenamiento">Almacenamiento</option>
                                    <option value="case">Case</option>
                                    <option value="fuente_alimentacion">Fuente de Almientación</option>
                                    <option value="cpu">CPU</option>
                                </select>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="inputMarca">Marca</label>
                                <input type="text" class="form-control" id="inputMarca" required name="marca">
                            </div>
                            <span id="tipo">
                                
                            </span>
                        </div>
                        <div class="form-row">
                            <label for="CustomFile" class="mx-auto">Agregar Imagen</label>
                            <div class="custom-file mb-3">
                                <input type="file" class="custom-file-input" id="CustomFile" required name="img">
                                <label class="custom-file-label" for="CustomFile">Elige un archivo...</label>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Enviar</button>
                    </form>
                </div>
                <div class="collapse multi-collapse hideMeBox" id="UsersPanel">
                    <a href="/adminUsers"><button class="btn btn-alert">Administrar usuarios</button></a>
                    <hr>
                    <div class="card card-body">
                        <div class="card card-body">
                            <form action="/register" method="POST">
                                <div class="form-group">
                                    <div class="form-group">
                                        <label for="exampleInputPassword1">Nombre</label>
                                        <input type="text" class="form-control" id="exampleInputPassword1" name="data[name]"
                                            required>
                                    </div>
                                    <label for="exampleInputEmail1">Correo Electrónico</label>
                                    <input type="email" class="form-control" id="exampleInputEmail1"
                                        aria-describedby="emailHelp" name="data[email]" required>
                                    <small id="emailHelp" class="form-text text-muted">No compartiremos tu correo con nadie más.</small>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Contraseña</label>
                                    <input type="password" class="form-control" id="exampleInputPassword1" name="data[pass]"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputType1">Sucursal</label> <br>
                                    <select name="data[optionSucursal]" class="form-control" id="">
                                        <option selected disabled value="">Elegir...</option>
                                        <%sucursal.forEach(item => {%>
                                        <option value="<%=item.id%>"><%=item.nombre%></option>
                                        <%});%>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputType1">Tipo de usuario</label> <br>
                                    <select name="data[optionType]" class="form-control" onchange="selectuser()" id="SelectUser">
                                        <option selected disabled value="">Elegir...</option>
                                        <option value="Admin">Administrador</option>
                                        <option value="Empleado">Empleado</option>
                                        <option value="Cliente">Cliente</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPos1">Cargo</label> <br>
                                    <select name="data[optionPos]" class="form-control" onchange="selectuser()" id="SelectJob">
                                        <option selected disabled value="">Elegir...</option>
                                        <option value="Encargado">Encargado</option>
                                        <option value="Contador">Contador</option>
                                        <option value="Ninguno">Ninguno</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="collapse multi-collapse hideMeBox" id="DisPanel">
                    <%var i=0%>
                    <%distributionData.forEach(el => {%>
                        <%let fechaSalida=new Date(el.fecha_salida)%>
                        <%let fechaEntrega=new Date(el.fecha_entrega)%>
                        <%let estado = (el.estado==0) ? "En espera de aprobacion" : "Aprobado"%>
                        <%let html = `<span class="btn btns btn-success mr-2" onclick='cambiarEstatus(${el.id})' type="" id="botonSuccess"><i class="fas fa-check"></i></span>`%>
                        <%let disabled = (el.estado == 0) ? html : '' %>
                    <div class="accordion " id="accordion">
                        <div class="card comentarios">
                            <div class="card-header" id="headingThree">
                                <h2 class="mb-0">
                                    <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
                                        data-target="#collapse<%=i%>">
                                        <div class="row">
                                            <div class="col-sm">
                                                Nombre: <%=el.nombre%>
                                            </div>
                                            <div class="col-sm">
                                                Fecha de entrega: <%=`${fechaEntrega.getDate()}/${parseInt(fechaEntrega.getMonth())+1}/${fechaEntrega.getFullYear()}`%>
                                            </div>
                                            <%-disabled%>
                                            <span class="btn btns" onclick='borrardis(`<%=el.id%>`)' type="" id="boton"><i class="far fa-trash-alt"></i></span>
                                        </div>
                                    </button>
                                </h2>
                            </div>
        
                            <div id="collapse<%=i%>" class="collapse">
                                <div class="card-body ">
                                    <div class="row">
                                        <div class="col-sm">
                                            Nombre: <%=el.nombre%>
                                        </div>
                                        <div class="col-sm">
                                            Fecha de salida: <%=`${fechaSalida.getDate()}/${parseInt(fechaSalida.getMonth())+1}/${fechaSalida.getFullYear()}`%>
                                        </div>
                                        <div class="col-sm">
                                            Fecha de entrega: <%=`${fechaEntrega.getDate()}/${parseInt(fechaEntrega.getMonth())+1}/${fechaEntrega.getFullYear()}`%>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm">
                                            Sucursal de origen: <%=el.origen%>
                                        </div>
                                        <div class="col-sm">
                                            Sucursal de destino: <%=el.destino%>
                                        </div>
                                        <div class="col-sm">
                                            Direccion: <%=el.direccion%>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm">
                                            Total de la compra: $ <%=el.total%>
                                        </div>
                                        <div class="col-sm">
                                            Referencia: <%=el.referencia%>
                                        </div>
                                        <div class="col-sm">
                                            Estado: <%=estado%>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <%i++%>
                    <%});%>
                </div>
            </div>
        </div>


        <script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
        <script src="./public/src/isAdmin.js"></script>
        <script src="./public/src/admin.js"></script>
        <script src="./public/src/session.js"></script>
    </body>
</html>   